// Polytype 0.6.0-beta.1 â€“ https://github.com/fasttime/Polytype
function t(e,o){if(G(e))return!1;if(o.has(e))return!0;o.add(e);const n=B(e);let r=!1;for(const e of n)Z(e)&&t(e,o)&&(r=!0);return r||T(e),!0}function e(e,o){for(let n of e)do{const e=n.constructor;U(e)&&t(e,o),n=f(n)}while(Z(n))}function o(t,e){const n=B(e);for(const e of n)if(e===t||o(t,e))return!0;return!1}const n=[],r=Function.prototype,s=Map,c=Object,{create:i,defineProperties:u,defineProperty:a,getOwnPropertyDescriptors:l,getPrototypeOf:f,prototype:p,setPrototypeOf:y}=c,d=Proxy,h=Reflect,{construct:w,get:g,ownKeys:m,set:P}=h,b=Set,O=String,v=Symbol.hasInstance,_=TypeError,$=t=>r.call.bind(t),x=$(r.bind),j=$(r[v]),I=$(p.hasOwnProperty),L=$(p.valueOf),M=(t,e)=>{if(t.has(e)){const t=`Duplicate superclass ${et(e)}`;throw _(t)}},S=t=>{if(!Q(t))throw _("Argument is not a function")},k=(...t)=>{if(!t.length)throw _("No superclasses specified");const o=new b,n=new b;for(const e of t){if(M(o,e),!U(e)){const t=`${et(e)} is not a constructor`;throw _(t)}const{prototype:t}=e;if(X(t)){const t=`Property 'prototype' of ${et(e)} is not an object or null`;throw _(t)}o.add(e),null!==t&&n.add(t)}const r=function(t,e){const o=function(t){return N(class{static _(e){if(!t.has(e))throw S(e),_("Argument is not a direct superclass");return K(e,this)}}._,"name","class",!1)}(t),n=C(t),r=function(t){return N(class{static _(e){S(e);const{prototype:o}=e;if(!t.has(o)){const t=Z(o)?"Property 'prototype' of argument does not match any direct superclass":"Property 'prototype' of argument is not an object";throw _(t)}return K(o,this)}}._,"name","class",!1)}(e),c=function(t){const e=function(...e){const o=function(t,e){const o=new s;let n,r;const c=t=>{if(n===!t)throw _("Mixed argument styles");n=t};for(const n of e){if(Y(n))throw _("Invalid arguments");let e,s;if(void 0!==n&&Z(e=n.super)){if(c(!0),M(o,e),!t.has(e)){const t=`${et(e)} is not a direct superclass`;throw _(t)}if(s=n.arguments,Y(s)){const t=`Invalid arguments for superclass ${et(e)}`;throw _(t)}}else c(!1),r||(r=t.values()),e=r.next().value,s=n;const i=void 0!==s?E(s):void 0;o.set(e,i)}return o}(t,e),n=new.target;for(const e of t){const t=o.get(e),r=q(e,t,n),s=m(r);for(const t of s)I(this,t)&&delete r[t];u(this,r)}};return y(e,null),e}(t),a=F(c,t,D),l=i(null,{constructor:W(a,!0,!1,!0),class:W(r)}),f=F(l,e,A),p={class:W(o),name:{get:n},prototype:W(f)};return u(c,p),a}(o,n);{const t=new b;e(o,t),e(n,t)}return r},A={setPrototypeOf:()=>!1},D={__proto__:A,apply:()=>{throw _("Constructor cannot be invoked without 'new'")}},C=t=>()=>`(${[...t].map(({name:t})=>O(t))})`,E=r.apply.bind((...t)=>t,null),F=(t,e,o)=>{const n=((t,e)=>({__proto__:e,get(e,o,n){const r=t.find(nt(o));if(void 0!==r)return g(r,o,n)},has:(e,o)=>t.some(nt(o)),set(e,o,n,r){const s=t.find(nt(o));return void 0!==s?P(s,o,n,r):(N(r,o,n,!0,!0),!0)}}))([t,...e],o),r=new d(t,n);return rt.set(r,e),r},K=(t,e)=>{const o=t=>{const o=t();return y(r,e),o},n=new d(e,{get:(n,r)=>o(()=>g(t,r,e)),set:(n,r,s)=>o(()=>P(t,r,s,e))}),r=i(n);return r},N=(t,e,o,n=!0,r=!1)=>a(t,e,W(o,n,r,!0)),R=()=>{const t="undefined"==typeof self?global:self;return!t.hasOwnProperty("classes")&&(N(t,"classes",k),N(c,"getPrototypeListOf",z),!0)},T=t=>N(t,v,H),W=(t,e,o,n)=>({value:t,writable:e,enumerable:o,configurable:n}),q=(t,e=n,o)=>l(w(t,e,o)),{getPrototypeListOf:z}={getPrototypeListOf:t=>{let e;{const o=f(t);if(null!==o){const t=rt.get(o);e=t?[...t]:[o]}else e=[]}return e}},B=t=>{let e=rt.get(t);if(!e){const o=f(t);e=null!==o?[o]:n}return e},G=t=>Q(t)&&I(t,"apply")&&I(t,"bind")&&I(t,"call")&&!I(t,"prototype")&&I(t,v),{[v]:H}=class{static[v](t){J=!0;try{if(Q(this)){const e=j(this,t);if(!J)return e;if(e||Z(t)&&o(this.prototype,t))return!0}return!1}finally{J=!1}}};let J=!1;const Q=t=>"function"==typeof t,U=t=>{if(Q(t)){const e=x(t);N(e,"prototype",null);const o=new d(e,{construct(){return this}});try{return new class extends o{},!0}catch(t){}}return!1},V=t=>!ot.includes(typeof t),X=t=>void 0===t||V(t),Y=t=>null===t||V(t),Z=t=>null!==t&&!X(t),{isPrototypeOf:tt}=class{static isPrototypeOf(t){return!(!Z(t)||!o(L(this),t))}},et=t=>{let e;return Q(t)&&(({name:e}=t),null!=e&&(e=O(e)))?e:e=O(t)},ot=["function","object","undefined"],nt=t=>e=>t in e,rt=new WeakMap;N(k,"name","classes",!1),N(p,"isPrototypeOf",tt);export{k as classes,R as defineGlobally,z as getPrototypeListOf};